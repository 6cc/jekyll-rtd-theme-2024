<div class="box box1">This box uses opacity</div>
<textarea rows="15" cols="60" id="code">
https://nodefree.org/dy/2023/07/20230712.yaml
https://nodefree.org/dy/2023/07/20230712.txt
https://clashnode.com/wp-content/uploads/2023/07/20230712.yaml
https://clashnode.com/wp-content/uploads/2023/07/20230712.txt
https://v2rayshare.com/wp-content/uploads/2023/07/20230712.yaml
https://v2rayshare.com/wp-content/uploads/2023/07/20230712.txt
https://tt.vg/freeclash
https://tt.vg/freev2
</textarea>
<div class="box box2">This box has a background color with an alpha channel</div>
</div>

<script type="text/javascript">

preCast();

function preCast() {
  let textArElement = document.querySelector('textarea');
  let arrayFromTextArea = textArElement.value
  .split(String.fromCharCode(10))
  .filter(line => line.trim() !== '');

  let perLine = [];
  let perOption = [];
  let selectArea = document.createElement('select');
  for (let i=0;i<arrayFromTextArea.length;i++)
  {
    perOption[i] = document.createElement('option');
    perLine[i] = arrayFromTextArea[i];
    perOption[i].innerText = matchRegex(perLine[i]);
    selectArea.appendChild(perOption[i]);
    perOption[i].onclick=function(){
      navigator.clipboard.writeText(this.innerText);};
  }
  let breakLine = document.createElement('br');
  selectArea.size = arrayFromTextArea.length;
  textArElement.parentNode.insertBefore(selectArea, textArElement);
  textArElement.parentNode.insertBefore(breakLine, textArElement);
}

function matchRegex (inputUrl) {
  let packageModule = [];
  let yyyyMmDd = /\/\d{4}\/\d{2}\/\d{8}\./i;
  packageModule = inputUrl.split(yyyyMmDd);
  return inputUrl.match(yyyyMmDd) ? packageModule[0] + 
  tamperCalendar() + packageModule[1] : inputUrl;
}

function tamperCalendar () {
  let currentDay = new Date();
  let currentYear = currentDay.getFullYear();
  let currentMonth = currentDay.getMonth() + 1;
  let currentDate = currentDay.getDate();
  let tamperModule = '/' + currentYear + '/'
   + padStart2(currentMonth)+ '/' + currentYear + padStart2
   (currentMonth) + padStart2(currentDate - 1) + '.';
  return tamperModule;
}

function padStart2(inputDigit) {
  let outStr = inputDigit.toString().padStart(2, '0');
  return outStr;
}
</script>

<style type="text/css">
textarea {
  background-color:#222222;
  color: #ADFF2F;
  font-size: 16px;
}
</style>